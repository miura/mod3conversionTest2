

\subsection{Exercise \arabic{exerciseCounter}}
\stepcounter{exerciseCounter}
Following the workflow described above write a macro to segment the nuclei in the image \textbf{"C1-Small.tif"} . The solution to this exercise is provided in: \textbf{code/solutions/module3\_02simple.ijm} .

\textbf{\underline{Note}} : The lower bound of the threshold should be set to the minimum intensity of the image, search for a macro function allowing to retrieve this value.

\subsection{Exercise \arabic{exerciseCounter}}
\stepcounter{exerciseCounter}

The lower and upper bounds of the nuclei area have been so far empirically set, we will now automate the estimation of these bounds. For this we will first analyze the particles after thresholding without setting any area bounds (do not add the particles to the ROI manager at this point). The areas of the analyzed particles will be measured to results table and copied to an array to be further processed (this can be done by writing a loop). Assuming that valid nuclei are in majority, try to figure out a way to estimate the lower and higher area bounds from the area measurements. Finally we will analyze the particles again but this time setting lower and upper area bounds (and adding them to the ROI manager).\\

\textbf{\underline{Hint}} : A useful function that we will make use of is \textbf{Array.sort(MyArray)} . The median can be computed by sorting the n areas and selecting the n/2$^{th}$ area.\\
 
Using this technique we can analyze images that have been taken with a wide variety of magnifications without having to manually adapt the "typical" area. You can find the solution to both exercises as a complete macro in \textbf{code/solutions/module3\_02.ijm} .